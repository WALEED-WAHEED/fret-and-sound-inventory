<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Product - Fret &amp; Sound Guitar Shop</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .nav { margin-bottom: 20px; }
        .nav a { margin-right: 15px; color: #3498db; text-decoration: none; }
        label { display: inline-block; width: 120px; }
        input { margin: 5px 0; padding: 5px; }
        .error { color: #e74c3c; font-size: 12px; }
        .btn { padding: 8px 16px; margin-top: 10px; cursor: pointer; background: #3498db; color: white; border: none; border-radius: 4px; }
        ul.parts-list { list-style: none; padding: 0; }
    </style>
</head>
<body>
<h1>Product</h1>
<div class="nav">
    <a th:href="@{/mainscreen}">Main Screen</a>
    <a th:href="@{/about}">About</a>
</div>
<form th:object="${product}" th:action="${product.id == 0} ? @{/products/add} : @{/products/update}" method="post">
    <input type="hidden" th:field="*{id}"/>
    <div>
        <label>Name</label>
        <input type="text" th:field="*{name}"/>
        <span th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="error"></span>
    </div>
    <div>
        <label>Price</label>
        <input type="number" step="0.01" th:field="*{price}"/>
        <span th:if="${#fields.hasErrors('price')}" th:errors="*{price}" class="error"></span>
    </div>
    <div>
        <label>Inv</label>
        <input type="number" th:field="*{inv}"/>
        <span th:if="${#fields.hasErrors('inv')}" th:errors="*{inv}" class="error"></span>
    </div>
    <div th:if="${globalErrors != null}">
        <div th:each="err : ${globalErrors}" th:text="${err.defaultMessage}" class="error"></div>
    </div>
    <div>
        <label>Parts</label>
        <ul class="parts-list">
            <li th:each="part : ${allParts}">
                <input type="checkbox" th:value="${part.id}" name="partIds"
                       th:checked="${product.parts != null and product.parts.contains(part)}"/>
                <span th:text="${part.name}">Part</span>
            </li>
        </ul>
    </div>
    <button type="submit" class="btn">Submit</button>
</form>
</body>
</html>
